<template id="template-basket">
    {{~it.products:value:index}}
    <div>
        <span>{{=value.name}}</span> <span><button onclick="adjustCart({{=index}}, -1)">-</button> <span>{{=value.quantity}}</span> <button onclick="adjustCart({{=index}}, 1)">+</button></span> <span>{{=(value.price * value.quantity).toFixed(2)}}</span>
    </div>
    {{~}}
    <div>
        <span>Total: {{=(it.total).toFixed(2)}}</span>
    </div>
</template>
<div id="output-basket"></div>
<script>
! function() {
    var template = doT.template(document.getElementById("template-basket").innerHTML);
    document.getElementById("output-basket").innerHTML = template(Z.basket);
}();

function adjustCart(index, increment) {
    Z.basket.products[index].quantity += increment;
    if (!Z.basket.products[index].quantity) {
        Z.basket.products.splice(index, 1);
    }
    Z.basket.update();
}
</script>