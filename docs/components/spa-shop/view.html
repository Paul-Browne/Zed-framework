<template id="template-view">{{? it.name }}<style>.view-modal:before{content:"";position:fixed;top:0;left:0;height:100%;width:100%;background:rgba(0,0,0,.4)}.view{background:#fff;border-radius:6px;padding:1em 2em;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);max-height:100%;max-width:100%;overflow:auto;box-sizing:border-box}</style><div class="view"><button onclick="Z.update({view:{}})">close</button><h1>{{=it.name}}</h1><h3>{{=it.templateObj.name}}</h3>{{?it.image}} <img src="images/{{=it.templateObj.image}}" width="250"> {{?}}<div>{{? it.variants}} <select onchange="selectedVariant(this.value)">{{~it.variants:value:index}} {{? value.selected}}<option selected="selected" value="{{=index}}">{{=value.name}}</option>{{??}}<option value="{{=index}}">{{=value.name}}</option>{{?}} {{~}}</select> {{~it.variants:value:index}} {{? value.selected}} <select onchange="selectedColor(this.value)">{{~value.colors:v:i}} {{? v.selected}}<option selected="selected" value="{{=i}}">{{=v.name}}</option>{{??}}<option value="{{=i}}">{{=v.name}}</option>{{?}} {{~}}</select> {{?}} {{~}} {{?}}</div><p>{{=it.templateObj.price}} â‚¬</p><button onclick="addToBasket(Z.view)">Add To Cart</button><div>{{~it.compatibleAccessories:value:index}}<div>{{=value.name}} <button onclick="Z.update({view:Z.view.compatibleAccessories[{{=index}}]})">view</button></div>{{~}}</div></div>{{?}}</template><div id="output-view" class="view-modal"></div><script>function addToBasket(e){var i={name:e.templateObj.name,price:e.templateObj.price},a=!1;Z.basket.products.forEach(function(e){e.name===i.name&&(a=!0,e.quantity=e.quantity+1)}),a||(i.quantity=1,Z.basket.products.push(i)),Z.basket.update()}function selectedVariant(e){Z.view.variants.forEach(function(e){e.selected=!1}),Z.view.variants[e].selected=!0,Z.update({view:Z.view})}function selectedColor(i){Z.view.variants.forEach(function(e){e.selected&&(e.colors.forEach(function(e){e.selected=!1}),e.colors[i].selected=!0)}),Z.update({view:Z.view})}!function(){var i;Z.view.accessories&&(Z.view.compatibleAccessories=[],Z.view.accessories.forEach(function(i){Z.products.forEach(function(e){"accessory"===e.type&&e.id===i&&Z.view.compatibleAccessories.push(e)})})),Z.view.variants&&Z.view.variants.forEach(function(a,e){"availability"in a&&!a.availability&&Z.view.variants.splice(e,1),a.colors.forEach(function(e,i){"availability"in e&&!e.availability&&a.colors.splice(i,1)})}),function(){if(Z.view.variants){var a=!1;Z.view.variants.forEach(function(e){if(e.selected&&(a=!0),e.selected=e.selected||!1,e.colors){var i=!1;e.colors.forEach(function(e){e.selected&&(i=!0),e.selected=e.selected||!1}),i||(e.colors[0].selected=!0)}}),a||(Z.view.variants[0].selected=!0)}}(),i={name:Z.view.name,price:Z.view.price,image:Z.view.image},Z.view.variants&&Z.view.variants.forEach(function(e){e.selected&&(e.image&&(i.image=e.image),e.price&&(i.price=e.price),e.name&&(i.name=(i.name?i.name:"")+" "+e.name),e.colors&&e.colors.forEach(function(e){e.selected&&(e.image&&(i.image=e.image),e.price&&(i.price=e.price),e.name&&(i.name=(i.name?i.name:"")+" "+e.name))}))}),Z.view.templateObj=i;var e=doT.template(document.getElementById("template-view").innerHTML);document.getElementById("output-view").innerHTML=e(Z.view)}()</script>