<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png" />
    <link rel="manifest" href="site.webmanifest" />
    <link rel="mask-icon" href="safari-pinned-tab.svg" color="#1d92d6" />
    <meta name="apple-mobile-web-app-title" content="Zed.js" />
    <meta name="application-name" content="Zed.js" />
    <meta name="msapplication-TileColor" content="#1d92d6" />
    <meta name="theme-color" content="#ffffff" />
    <meta
      name="description"
      content="Zed.js is a templateless micro frontend framework. It handles the rendering, updating and state management of your html components in only 1Kb"
    />
    <title>Zed.js • Micro framework</title>
    <link rel="stylesheet" href="css/prism.css" />
    <style type="text/css">
      body {
        margin: 10px auto;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji",
          "Segoe UI Symbol";
        max-width: 960px;
        padding: 0 10px;
      }

      img {
        margin: 0 auto;
        display: block;
        animation-name: hue;
        animation-duration: 36s;
      }
      .center {
        text-align: center;
      }

      .wb-ba {
        word-break: break-all !important;
        white-space: normal !important;
      }
      .zed {
        padding: 13px;
        border: 1px dashed #000;
        border-radius: 6px;
      }

      p code {
        background: #333;
        color: #fff;
        font-family: Consolas, Monaco, "Andale Mono", "Ubuntu Mono", monospace;
        border-radius: 4px;
        padding: 0.05rem 0.3rem;
        font-size: 13px;
      }

      @keyframes hue {
        from {
          filter: hue-rotate(0deg);
        }

        to {
          filter: hue-rotate(360deg);
        }
      }
    </style>
    <!-- <script type="text/javascript">if ('serviceWorker' in navigator) {window.addEventListener('load', function() {navigator.serviceWorker.register('sw.js')});}</script> -->
  </head>

  <body>
    <img src="images/logo-blue.svg" height="100" />
    <h1 class="center">Zed.js</h1>
    <h3 class="center">
      Zed.js is a templateless micro frontend framework.<br />
      It handles the rendering, updating and state management of your html
      components in only 1Kb
    </h3>
    <pre
      class="language-html"
    ><code class="wb-ba">&lt;script&gt;!function(e){if(!e.Z){var i={};e.Z={load:function(e,r){var o=[];e.forEach(function(e,t){o[t]=null;var n=new XMLHttpRequest;for(var a in n.onreadystatechange=function(){4==n.readyState&&(o[t]=n.status==(e.status||200)?e.callback?e.callback(n.responseText):n.responseText:void 0,Z.load[e.key]=o[t],~o.indexOf(null)||r(o))},n.open(e.method||"GET",e.url,!0),e.headers)n.setRequestHeader(a,e.headers[a]);n.send(e.body)})},update:function(e,t){i[e]&&(i[e].f(t),i[e].l.forEach(function(e){e()}))},mount:function(n,e){if(n.key&&!e&&(i[n.key]={l:[],f:function(e){for(var t in e)n[t]=e[t];Z.mount(n,!0)}}),0!=(n.pre&&n.pre())){var t=n.inner,a=n.outer,r=n.state,o=n.before,u=n.after,f={state:r,prev:Z[n.key]};if(0!=(o&&o(f.state,f.prev))){var s=n.render(f.state,f.prev);t&&(t.innerHTML=s),a&&(a.outerHTML=s),u&&u(f.state,f.prev)}Z[n.key]=r}},watch:function(e,t){i[e]&&i[e].l.push(t)}}}}(window,document);&lt;/script&gt;</code></pre>
    <p>or include from a cdn</p>
    <div>
      <pre
        class="language-html"
      ><code>&lt;script src="https://cdn.jsdelivr.net/npm/zedjs"&gt;&lt;/script&gt;</code></pre>
      <pre
        class="language-html"
      ><code>&lt;script src="https://unpkg.com/zedjs"&gt;&lt;/script&gt;</code></pre>
    </div>
    <br />
    <a
      class="github-button"
      href="https://github.com/paul-browne/Zed-framework"
      data-icon="octicon-star"
      data-size="large"
      aria-label="Star paul-browne/Zed-framework on GitHub"
      >Star on GitHub</a
    >
    <br />
    <h1>Mount</h1>

    <pre><code class="language-js">Z.mount({
    key: string, // to update the component or if using data
    inner: DOM node, // to render inside of
    outer: DOM node, // for render to replace
    pre: function(), // fired before the render
    before: function(), // fired before the render, but after 
    render: function(), // html to be rendered 
    after: function(), // fired after the render
    state: JSON // requires key
})</code></pre>

    <h2>render:</h2>

    <p>
      The simplest <code>Z.mount()</code> will insert the contents of
      <code>render:</code> into the <code>inner:</code> DOM element.
    </p>
    <pre><code class="language-js">Z.mount({
    render: function(){
        return "&lt;h1&gt;Hello world!&lt;/h1&gt;";
    },
    inner: document.getElementById("insert-here")
})</code></pre>

    <p>
      You can alternatively pass a string to <code>render:</code> which will be
      interpreted as a path to the HTML resource.
    </p>
    <pre><code class="language-js">Z.mount({
    render: "path/to/component.html",
    inner: document.getElementById("insert-here")
})</code></pre>

    <h2>inner: and outer:</h2>

    <p>
      <code>inner:</code> and <code>outer:</code> are DOM node references that
      are used as the entry point for the <code>render:</code>
    </p>
    <p>
      The only difference is that the contents of <code>render:</code> will be
      placed inside the <code>inner:</code> DOM node, but will entirely replace
      the <code>outer:</code> DOM node.
    </p>
    <p>
      NOTE: when you use <code>outer:</code> it will not be possible to update
      that component.
    </p>

    <h2>before: and after:</h2>
    <p>
      <code>before:</code> and <code>after:</code> are functions that will be
      executed before and after the <code>render:</code>
    </p>

    <pre><code class="language-js">Z.mount({
    before: function(){
      console.log("fires before the render");
      return ...
    },    
    render: "path/to/component.html",
    after: function(){
      console.log("fires after the render");
      return ...
    },
    inner: document.getElementById("insert-here")
})</code></pre>

    <h2>key:</h2>

    <p>
      A <code>key:</code> is required if you are updating a component, or if you
      are associating some <code>data:</code> with that component.
    </p>

    <h2>data:</h2>

    <p>
      You can also add some <code>data:</code> to the <code>render:</code>, in
      the following example the array <code>["bar", "baz", "buff"]</code> will
      be available globally as <code>Z.foo</code> before the
      <code>render:</code>
    </p>

    <p>
      <code>data:</code> is also available for the <code>before:</code> function
    </p>

    <pre><code class="language-js">Z.mount({
    key: "foo",
    render: "path/to/component.html",
    inner: document.getElementById("insert-here"),
    data: ["bar", "baz", "buff"]
})</code></pre>

    <p>
      Again, you can pass a string to <code>data:</code> to use an external
      resource for the data.
    </p>

    <pre><code class="language-js">Z.mount({
    key: "foo",
    render: "path/to/component.html",
    inner: document.getElementById("insert-here"),
    data: "path/to/data.json"
})</code></pre>

    <h2>Renderless (data only) components</h2>

    <p>
      "Dumb" components do not render anything. They are basically just used as
      a global placeholder for data
    </p>

    <pre><code class="language-js">Z.mount({
    key: "foo",
    data: "path/to/data.json"
})</code></pre>

    <h1>Update</h1>

    <pre><code class="language-js">Z.update("key", {
    before: function(), // update the "before" function
    render: function() or string "path/to/resource.html", // update the render
    after: function(), // update the "after" function
    data: JSON or string "path/to/resource.json" // update the data
})</code></pre>

    <p>
      To update a component, with no new methods, simply do the following.
    </p>

    <p></p>

    <pre><code class="language-js">Z.update("foo")</code></pre>

    <p>To update a component with new <code>data:</code></p>
    <p>
      This will re-render the component with the new <code>Z.foo</code> array.
    </p>

    <pre><code class="language-js">Z.update("foo", {
    data: ["lorem", "ipsum", "dolor"]
})</code></pre>

    <p>You can also re-render with a new HTML component.</p>

    <pre><code class="language-js">Z.update("foo", {
    render: "path/to/new-component.html"
})</code></pre>

    <p>
      and you could also pass new <code>before:</code> and/or
      <code>after:</code> functions.
    </p>

    <pre><code class="language-js">Z.update("foo", {
    before: null,
    after: function(){
      console.log("after");
    }
})</code></pre>

    <h1>Watch</h1>

    <p>You can <code>Z.watch()</code> to a component for when it's updated.</p>

    <pre><code class="language-js">Z.watch("foo", function(){
      console.log("foo updated!");
})</code></pre>

    <h2>Demos</h2>
    <h3>Counter Demo</h3>
    <h4>view <a href="demos/counter">live</a> version</h4>
    <pre><code class="language-html">&lt;head&gt;
    &lt;script src="js/Z.min.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;h1&gt;Counter Demo&lt;/h1&gt;
    &lt;button onclick='Z.update("count", {data: Z.count - 1})'&gt;-&lt;/button&gt;
    &lt;span id="output"&gt;&lt;/span&gt;
    &lt;button onclick='Z.update("count", {data: Z.count + 1})'&gt;+&lt;/button&gt;
    &lt;script&gt;
      Z.mount({
        key: "count",
        render: function() {
          return Z.count;
        },
        inner: document.getElementById("output"),
        data: 0
      })
    &lt;/script&gt;
&lt;/body&gt;</code></pre>

    <h3>Todo List Demo</h3>
    <h4>view <a href="demos/todo">live</a> version</h4>
    <pre><code class="language-html">&lt;head&gt;
    &lt;script src="js/Z.min.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Todo List Demo&lt;/h1&gt;
    &lt;div id="todo-list"&gt;&lt;/div&gt;
    &lt;div id="todo-add"&gt;&lt;/div&gt;
    &lt;script&gt;
      Z.mount({
        key: "todos",
        render: function() {
          return Z.todos.map(function(todo, index) {
            return `
              &lt;div&gt;
                &lt;span&gt;${todo}&lt;/span&gt;
                &lt;button onclick="Z.todos.splice(${index}, 1); Z.update('todos', {data: Z.todos})"&gt;remove&lt;/button&gt;
              &lt;/div&gt;
            `;
          }).join("");
        },
        inner: document.getElementById("todo-list"),
        data: []
      });

      Z.mount({
        render: function() {
          return `
            &lt;input id="task" type="text" placeholder="add task" /&gt;
            &lt;button&gt;Add&lt;/button&gt;
          `;
        },
        after: function() {
          document.querySelector("#task + button").addEventListener("click", function() {
            var task = document.getElementById("task");
            Z.todos.push(task.value);
            Z.update("todos", {
              data: Z.todos
            });
            task.value = "";
          });
        },
        outer: document.getElementById("todo-add")
      });      
    &lt;/script&gt;
&lt;/body&gt;</code></pre>

    <h3>Shop Demo</h3>
    <h4>view <a href="demos/shop">live</a> version</h4>
    <pre><code class="language-html">&lt;head&gt;
    &lt;script src="js/Z.min.js"&gt;&lt;/script&gt;
    &lt;link rel="stylesheet" type="text/css" href="css/shop.css" /&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div id="basket"&gt;&lt;/div&gt;
    &lt;div id="products"&gt;&lt;/div&gt;
    &lt;div id="view"&gt;&lt;/div&gt;
    &lt;script&gt;

    Z.mount({
      key: "basket",
      render: function() {
        var total = Z.basket.products.reduce(function(acc, current) {
          return acc + current.quantity * current.price;
        }, 0);

        return Z.basket.products.length
          ? Z.basket.products
              .map(function(product, index) {
                return `
                  &lt;div&gt;
                      &lt;span&gt;${
                        product.name
                      }&lt;/span&gt; &lt;span&gt;&lt;button onclick="Z.basket.adjustCart(${index}, -1)"&gt;-&lt;/button&gt; &lt;span&gt;${product.quantity}&lt;/span&gt; &lt;button onclick="Z.basket.adjustCart(${index}, 1)"&gt;+&lt;/button&gt;&lt;/span&gt; &lt;span&gt;${(product.price * product.quantity).toFixed(2)}&lt;/span&gt;
                  &lt;/div&gt;
                `;
              })
              .join("") +
              `&lt;div&gt;
                &lt;span&gt;Total: ${total.toFixed(2)}&lt;/span&gt;
              &lt;/div&gt;
              `
          : "";
      },
      inner: document.getElementById("basket"),
      before: function() {},
      data: {
        products: JSON.parse(localStorage.getItem("basket")) || [],
        update: function() {
          localStorage.setItem("basket", JSON.stringify(this.products));
          Z.update("basket", {
            data: this
          });
          Z.update("view");
        },

        adjustCart: function(index, increment) {
          Z.basket.products[index].quantity += increment;
          if (!Z.basket.products[index].quantity) {
            Z.basket.products.splice(index, 1);
          }
          Z.basket.update();
        },

        addToBasket: function(item) {
          var basketObj = {
            name: item.name,
            price: item.price
          };

          var cartContainsItem = Z.basket.products.some(function(product, index) {
            if (product.name === basketObj.name) {
              product.quantity = product.quantity + 1;
              return true;
            }
          });

          if (!cartContainsItem) {
            basketObj.quantity = 1;
            Z.basket.products.push(basketObj);
          }
          Z.basket.update();
        }
      }
    });

    Z.mount({
      key: "products",
      render: function() {
        return Z.products
          .map(function(product, index) {
            return `
            &lt;div class="product" onclick='Z.update("view", {data:Z.products[${index}]})'&gt;
                &lt;h2&gt;${product.name}&lt;/h2&gt;
                &lt;img src="images/${product.image}" width="200"&gt;
                &lt;span&gt;${product.price} €&lt;/span&gt;
            &lt;/div&gt;
          `;
          })
          .join("");
      },
      inner: document.getElementById("products"),
      data: "json/products.json"
    });

    Z.mount({
      key: "view",
      render: function() {
        var btn = `&lt;button onclick="Z.basket.addToBasket(Z.view)"&gt;Add To Cart&lt;/button&gt;`;
        Z.basket.products.forEach(function(product, index) {
          if (product.name === Z.view.name) {
            btn = `&lt;button onclick="Z.basket.adjustCart(${index}, -1)"&gt;-&lt;/button&gt; &lt;span&gt;${product.quantity}&lt;/span&gt; &lt;button onclick="Z.basket.adjustCart(${index}, 1)"&gt;+&lt;/button&gt;`;
          }
        });
        
        return Z.view.name
          ? `
          &lt;div class="view-modal"&gt;
            &lt;div class="view"&gt;
                &lt;button onclick='Z.update("view", {data:{}})'&gt;close&lt;/button&gt;
                &lt;h3&gt;${Z.view.name}&lt;/h3&gt;
                &lt;img src="images/${Z.view.image}" width="250"&gt;
                &lt;p&gt;${Z.view.price} €&lt;/p&gt;
                ${btn}
            &lt;/div&gt;
          &lt;/div&gt;
          `
          : "";
      },
      inner: document.getElementById("view"),
      data: {}
    });    
    &lt;/script&gt;
&lt;/body&gt;</code></pre>
    <br /><br />

    <script src="js/prism.js"></script>
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=UA-36765884-7"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "UA-36765884-7");
    </script>
  </body>
</html>
