const fs = require('fs-extra');
const path = require('path');
const mkdirp = require('mkdirp');

var newestTime = 0;

function walkSync(inPath) {
    if (fs.statSync(inPath).isDirectory()) {
        fs.readdirSync(inPath).map(subDirectory => walkSync(path.join(inPath, subDirectory)))
    } else {
        var check = fs.statSync(inPath);
        if(check.mtimeMs > newestTime ){
            newestTime = check.mtimeMs; 
        }
        if(check.ctimeMs > newestTime ){
            newestTime = check.ctimeMs; 
        }
    }
}

module.exports = function(rootDir){

    mkdirp(rootDir, function(err) {
        if (err) {
            console.error(err);
        }
    });

    walkSync(rootDir);
    return newestTime;
}